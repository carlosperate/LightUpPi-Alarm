/*
 (c) 2011-2014, Vladimir Agafonkin
 SunCalc is a JavaScript library for calculating sun/mooon position and light phases.
 https://github.com/mourner/suncalc
*/
!function(){"use strict";function n(n){return n.valueOf()/y-.5+z}function t(n){return new Date((n+.5-z)*y)}function e(t){return n(t)-H}function r(n,t){return E(p(n)*w(S)-P(t)*p(S),w(n))}function u(n,t){return D(p(t)*w(S)+w(t)*p(S)*p(n))}function a(n,t,e){return E(p(n),w(n)*p(t)-P(e)*w(t))}function i(n,t,e){return D(p(t)*p(e)+w(t)*w(e)*w(n))}function o(n,t){return k*(280.16+360.9856235*n)-t}function c(n){return k*(357.5291+.98560028*n)}function d(n){var t=k*(1.9148*p(n)+.02*p(2*n)+3e-4*p(3*n)),e=102.9372*k;return n+t+e+m}function f(n){var t=c(n),e=d(t);return{dec:u(e,0),ra:r(e,0)}}function s(n,t){return Math.round(n-C-t/(2*m))}function h(n,t,e){return C+(n+t)/(2*m)+e}function l(n,t,e){return H+n+.0053*p(t)-.0069*p(2*e)}function v(n,t,e){return I((p(n)-p(t)*p(e))/(w(t)*w(e)))}function M(n,t,e,r,u,a,i){var o=v(n,e,r),c=h(o,t,u);return l(c,a,i)}function g(n){var t=k*(218.316+13.176396*n),e=k*(134.963+13.064993*n),a=k*(93.272+13.22935*n),i=t+6.289*k*p(e),o=5.128*k*p(a),c=385001-20905*w(e);return{ra:r(i,o),dec:u(i,o),dist:c}}var m=Math.PI,p=Math.sin,w=Math.cos,P=Math.tan,D=Math.asin,E=Math.atan2,I=Math.acos,k=m/180,y=864e5,z=2440588,H=2451545,S=23.4397*k,T={};T.getPosition=function(n,t,r){var u=k*-r,c=k*t,d=e(n),s=f(d),h=o(d,u)-s.ra;return{azimuth:a(h,c,s.dec),altitude:i(h,c,s.dec)}};var x=T.times=[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];T.addTime=function(n,t,e){x.push([n,t,e])};var C=9e-4;T.getTimes=function(n,r,a){var i,o,f,v,g,m=k*-a,p=k*r,w=e(n),P=s(w,m),D=h(0,m,P),E=c(D),I=d(E),y=u(I,0),z=l(D,E,I),H={solarNoon:t(z),nadir:t(z-.5)};for(i=0,o=x.length;o>i;i+=1)f=x[i],v=M(f[0]*k,m,p,y,P,E,I),g=z-(v-z),H[f[1]]=t(g),H[f[2]]=t(v);return H},T.getMoonPosition=function(n,t,r){var u=k*-r,c=k*t,d=e(n),f=g(d),s=o(d,u)-f.ra,h=i(s,c,f.dec);return h+=.017*k/P(h+10.26*k/(h+5.1*k)),{azimuth:a(s,c,f.dec),altitude:h,distance:f.dist}},T.getMoonIllumination=function(n){var t=e(n),r=f(t),u=g(t),a=149598e3,i=I(p(r.dec)*p(u.dec)+w(r.dec)*w(u.dec)*w(r.ra-u.ra)),o=E(a*p(i),u.dist-a*w(i)),c=E(w(r.dec)*p(r.ra-u.ra),p(r.dec)*w(u.dec)-w(r.dec)*p(u.dec)*w(r.ra-u.ra));return{fraction:(1+w(o))/2,phase:.5+.5*o*(0>c?-1:1)/Math.PI,angle:c}},"function"==typeof define&&define.amd?define(T):"undefined"!=typeof module?module.exports=T:window.SunCalc=T}();
